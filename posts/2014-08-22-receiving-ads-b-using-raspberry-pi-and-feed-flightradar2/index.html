<!doctype html>
<html ⚡ lang="ja-jp">
  <head>
    <meta charset="utf-8" />
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>

    
    <title>Raspberry-PiでADS-Bを受信しFlightradar24にフィードする</title>

    
    




  
  <meta name="author" content="TT" />
  <meta name="description" content="" />

  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@edy555" />
  <meta name="twitter:title" content="Computer &amp; RF Technology" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:image" content="https://ttrftech.github.io/img/avatar.jpg" />




<meta name="generator" content="Hugo 0.54.0">


<link rel="canonical" href="https://ttrftech.github.io/posts/2014-08-22-receiving-ads-b-using-raspberry-pi-and-feed-flightradar2/">
<link rel="alternative" href="/index.xml" title="Computer &amp; RF Technology" type="application/atom+xml">


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="format-detection" content="telephone=no,email=no,adress=no" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />




<link rel="icon" href="/img/favicon.ico" />
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" sizes="120x120" href="/img/avatar.jpg">



<link rel="stylesheet" href="/css/nostalgia.css">





  <link rel="stylesheet" href="/css/fork-awesome.min.css">


  </head>
  <body>
    
    <div id="contain">
	  

<div id="sidebar" class="sidebar">
  <section class="first odd">

    
      <h1><a href="https://ttrftech.github.io">Computer &amp; RF Technology</a></h1>
    

	  <h4>About</h4>
      
        SDRや測定器などソフトウェア寄りのRF実験についてのメモです。キット頒布中。
      
  </section>



  <section class="odd">
  
      <a target="_blank" href="https://github.com/ttrftech" title="ttrftech"><i class="fa fa-github fa-2x"></i></a>
      
      
      <a target="_blank" href="https://twitter.com/edy555" title="edy555"><i class="fa fa-twitter fa-2x"></i></a>
      
         
      
      
      
      
      
      
      
      

    
      <a href="https://ttrftech.github.io/index.xml" type="application/rss+xml" title="RSS"><i class="fa fa-rss-square fa-2x"></i></a>
        <ul class="sidebar-nav"></ul>
    </section>
  

  
    
      <section id="menu" class="odd">
        
          <h4>Special Pages</h4>
        
        <ul class="sidebar-nav">
        
          <li class="sidebar-nav-item">
            <a href="https://ttrftech.github.io/kit/adsbamp" title="ADS-Bプリアンプキット" >ADS-Bプリアンプキット</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://ttrftech.github.io/kit/centsdr" title="CentSDRキット" >CentSDRキット</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://ttrftech.github.io/kit/hfconv/" title="HFCONVキット" >HFCONVキット</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://ttrftech.github.io/kit/lpclink2bb/" title="LPC-Link2ブレイクアウトボード" >LPC-Link2ブレイクアウトボード</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://ttrftech.github.io/kit/nanovna/" title="NanoVNAキット" >NanoVNAキット</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://ttrftech.github.io/tags/" title="Tags" >Tags</a>
          </li>
        
        </ul>
      </section>
    
  

  
    
      <section id="menu" class="odd">
        
          <h4>Links</h4>
        
        <ul class="sidebar-nav">
        
          <li class="sidebar-nav-item">
            <a href="https://www.amazon.co.jp/gp/product/B00M6LTKNE/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=B00M6LTKNE&amp;linkCode=as2&amp;tag=fromsapporo07-22" title="HFコンバータ完成品" >HFコンバータ完成品</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://astore.amazon.co.jp/ttrftech-22" title="関連アイテム一覧" >関連アイテム一覧</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://www.amazon.co.jp/gp/product/B00F9COA64/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=B00F9COA64&amp;linkCode=as2&amp;tag=ttrftech-22" title="記事掲載:トラ技 2013年11月号" >記事掲載:トラ技 2013年11月号</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://www.amazon.co.jp/gp/product/B008CMZLQG/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=B008CMZLQG&amp;linkCode=as2&amp;tag=ttrftech-22" title="記事掲載:トラ技 2014年6月号" >記事掲載:トラ技 2014年6月号</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://www.amazon.co.jp/gp/product/B00VS238YY/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=B00VS238YY&amp;linkCode=as2&amp;tag=ttrftech-22" title="特集執筆:Interface 2015年7月号" >特集執筆:Interface 2015年7月号</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://www.amazon.co.jp/gp/product/B010TMHK06/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=B010TMHK06&amp;linkCode=as2&amp;tag=fromsapporo07-22" title="連載記事:Interface 2015年10月号〜2016年8月号" >連載記事:Interface 2015年10月号〜2016年8月号</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://www.amazon.co.jp/gp/product/B06XN73MWK/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=B06XN73MWK&amp;linkCode=as2&amp;tag=ttrftech-22" title="特集分担:Interface 2017年6月号" >特集分担:Interface 2017年6月号</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://amzn.to/2Ss0YWr" title="特集分担:Interface 2018年9月号" >特集分担:Interface 2018年9月号</a>
          </li>
        
          <li class="sidebar-nav-item">
            <a href="https://amzn.to/2RiOqyS" title="特集執筆:RFワールドNo.44" >特集執筆:RFワールドNo.44</a>
          </li>
        
        </ul>
      </section>
    
  
	  

  
  
    
      <section class="even">
        <h4>Recent Posts</h4>
        <ul id="recent_posts"  class="sidebar-nav">
          
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2018-10-28-gnuradio-grc-rfworld-no44/">GNU Radioの入門に是非！解説記事をRFワールドNo44特集「GRCで広がるSDRの世界」に寄稿しました</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2018-07-27-centsdr-lcd-panel/">CentSDRに使えるLCDパネルのバリエーション</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2018-07-01-centsdr-kit-2nd-lot/">CentSDR 2nd lotをキット頒布します</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2018-04-23-gnuradio-osx-with-homebrew/">GNURadioをOSX&#43;Homebrewで整備してみました</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2018-02-11-centsdr-powermeter-frequency-response-and-linerinity/">CentSDRのパワーメータの周波数特性と直線性を測定してみた</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2018-02-04-centsdr-fm-broadcasting-reception/">CentSDRでFMラジオが受信できるようになりました</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2018-01-20-rfworld-workshop-meeting-2018/">RFワールド Workshop&amp;Meeting 2018で話します</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2018-01-17-centsdr-rf-power-meter/">CentSDRにパワーメータを付けてみました</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2018-01-11-centsdr-parts-kit/">CentSDRのキットを頒布します</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2017-11-19-makerfaireshenzhen2017/">深圳のMakerFaire Shenzhen 2017に行ってきました</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2017-11-04-centsdr-spectrum-and-waveform-display/">CentSDRでスペクトラムに加えて波形も表示するようにしてみた</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2017-10-09-dcoffset-rejection-from-adc-and-cmsis-dsp-library/">CentSDRの信号処理におけるDCオフセット補償</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2017-09-18-plotting-airrace-tracklog-with-rtl-sdr/">RTL-SDRでエアレース機のADS-Bメッセージを受信し、飛行軌跡をJupyterとpandasでGeoJSONに変換してプロットしてみる</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2017-08-15-centsdr-stm32-based-standalone-receiver/">CentSDRを組み立ててみました</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2017-08-04-centsdr-mcu-based-standalone-sdr-receiver/">ワンボードSDR CentSDRを試作中です</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2017-02-25-hmc472-digital-step-attenuator-and-nanosg/">HMC472ステップアッテネータチップを試してみる</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2017-02-19-limesdr-in-the-aluminium-box/">LimeSDRをケースにいれてみました</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2017-02-09-limesdr-unboxing-and-using-with-gqrx/">LimeSDRをGQRXで使ってみる</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2017-02-05-as5600-magnet-rotary-hall-sensor/">ロータリホールセンサAS5600を試用してみる</a>
              </li>
            
          
            
              <li class="post sidebar-nav-item">
                <a href="/posts/2017-01-15-measure-crystal-filter-with-nanovna/">NanoVNAでクリスタルフィルタの特性を見てみる</a>
              </li>
            
          
        </ul>
      </section>
    
  

  
<a class="twitter-timeline" data-height="800" href="https://twitter.com/edy555?ref_src=twsrc%5Etfw">Tweets by edy555</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  
</div>

	  
<div id="contain">
  <div id="content">
    <div class="regular">
      <article class="hentry" role="article">
		<time class="date">Friday, Aug 22, 2014</time>
<h2><a href="https://ttrftech.github.io/posts/2014-08-22-receiving-ads-b-using-raspberry-pi-and-feed-flightradar2/" class="title">Raspberry-PiでADS-Bを受信しFlightradar24にフィードする</a></h2>


        

        <div class="entry-content">
          
          
          
          <p>ADS-Bのアンテナも屋外設置して、それなりに受信ができるようになりました。ここまできたら常時運用してみたいところです。ところがPCで常時運用を行うとそれなりの電力を消費してしまいますし、なにかと邪魔です。そこでお決まりの小型省電力なRaspberry Piを使うことにしました。これなら消費電力は2W程度で済ませられます。</p>

<p>実は既に各種データ収集のためにRaspberry Piを常時稼働させておりましたので、これにADS-B受信も便乗させることにしました。</p>

<p><img src="https://78.media.tumblr.com/7030ea6f85008cc684f775a5121b255e/tumblr_inline_p8rw9clDiU1r9hszk_540.jpg" alt="image" /></p>

<p>使用したRaspberry Piは、最初の販売バージョン256MBのモデルです。これまで、I2Cの大気圧センサ、自作USB温度センサ、Bluetooth経由で電力量の収集を行って、それぞれインターネットにアップロードを継続して行っています。ここにRTLドングルを追加することにしました。ただ、屋外から引っ張ってきたUSBケーブルで場所の都合がありますので、設置場所を変更しました。</p>

<p>ネットにはいくつかRaspberry PiによるADS-Bの運用事例が公開されていますが、改めて手順を紹介します。OSにはRaspbian、ソフトウェアはMac OSと同じようにdump1090を使用します。librtlsdrをビルドするためにcmakeを追加でインストールします。またライブラリとしてlibusbの開発版を入れておきます。</p>

<pre><code class="language-bash">$ sudo apt-get install cmake screen
$ sudo apt-get install libusb-1.0-0-dev
</code></pre>

<p>準備ができたら、ソースをgitで引っ張ってきてビルドします。configureでもビルドできるようですが、今回はcmakeでやってみます。</p>

<pre><code class="language-bash">$ git clone git://git.osmocom.org/rtl-sdr
$ cd rtl-sdr
$ mkdir build
$ cmake ..
$ make
</code></pre>

<p>ビルドが成功したら、インストールします。追加されたライブラリのパスを認識させるためにldconfigを一度だけ実行しておく必要があります。そうしないとdump1090のビルド時にリンクに失敗してしまいます。またUSBデバイスをユーザ権限で利用できるようにするために、udevルールをコピーしておきます。</p>

<pre><code class="language-bash">$ sudo make install
$ sudo ldconfig
$ sudo cp rtl-sdr.rules /etc/udev/rules.d/
</code></pre>

<p>一度念のためリブートしておきます。</p>

<p>RTLドングルを接続して、rtl_testを実行してみます。</p>

<pre><code class="language-bash">$ rtl_test
Found 1 device(s):
0: ezcap USB 2.0 DVB-T/DAB/FM dongle
  Using device 0: ezcap USB 2.0 DVB-T/DAB/FM dongle
Found Rafael Micro R820T tuner
</code></pre>

<p>もし、うまく動作しない場合は、RTLドングル用のLinuxのドライバがロードされている可能性があります。その場合は下記を試してみてください。</p>

<pre><code class="language-bash">$ sudo rmmod dvb_usb_rtl28xxu
</code></pre>

<p>これでうまくいくようになるなら、ドライバがロードされないように/etc/modprobe.d/にno-rtl.confというファイルを下記の内容で作成しておきます。</p>

<pre><code class="language-bash">$ sudo vi /etc/modprobe.d/no-rtl.conf
blacklist dvb_usb_rtl28xxu
blacklist rtl2832
blacklist rtl2830
</code></pre>

<p>続いてdump1090をビルドします。githubからソースを引っ張ってきてビルドします。MalcolmRobbさんのバージョンを使用します。</p>

<pre><code class="language-bash">$ git clone https://github.com/MalcolmRobb/dump1090.git
$ cd dump1090
$ make
</code></pre>

<p>インストールのスクリプトは用意されていませんが、今回はそのまま動かしてみます。</p>

<pre><code class="language-bash">$ ./dump1090
</code></pre>

<p>うまく行っていれば、受信したメッセージが表示されるはずです。</p>

<p>さて、常時稼働を簡便に済ませるため、GNU Screenを使用します。screenを使うと、プロセスを動作させたまま接続を切断したり、複数のセッションを起動することが可能です。</p>

<pre><code class="language-bash">$ sudo apt-get install screen
$ screen
</code></pre>

<p>screenを起動すると、グリーティングが表示されますので焦らずEnterします。</p>

<p><img src="https://78.media.tumblr.com/2861fad3c90270b06933ca302df0c949/tumblr_inline_p8rw9ci2XF1r9hszk_540.png" alt="image" /></p>

<p>screenの中で新たにシェルが起動します。稼働させておきたいプロセスはここで起動するようにします。さっそくdump1090を起動します。</p>

<pre><code class="language-bash">$ ./dump1090 --net --aggressive --interactive
</code></pre>

<p>正常に起動したことを確認したら、ここでscreenのセッションを切り離します。Ctrl-Aを押し、続けてCtrl-Dを押します。これはデタッチDetach操作の意味です。そうするとscreenを起動する前の画面に戻りますが、プロセスはそのまま動作しています。</p>

<p>先ほどのscreenセッションに再接続(retach)するためには、screen -rを使用します。</p>

<pre><code class="language-bash">$ screen -r
</code></pre>

<p>そうすると先ほどの画面が復活するはずです。Ctrl-A+Ctrl-Dと、screen -rを使用すると自在に行き来することが可能です。ログアウトしても動作しています。<br />
複数のセッションを動作させることも可能です。オプション無しでscreenコマンドを実行すると新しいセッションが作成されます。同様にデタッチすることができます。この状態で再接続しようと-rオプション付きでscreenすると、候補が表示されます。</p>

<pre><code class="language-bash">$ screen -r
There are several suitable screens on:
1255.pts-0.raspberrypi (08/22/14 07:25:26) (Detached)
12561.pts-0.raspberrypi (08/14/14 13:17:48) (Detached)
11701.pts-0.raspberrypi (08/14/14 11:27:58) (Detached)
2432.pts-0.raspberrypi (08/13/14 14:31:12) (Detached)
Type &quot;screen [-d] -r [pid.]tty.host&quot; to resume one of them.
</code></pre>

<p>-rオプションに表示されたセッション名を指定すると、そのセッションに再接続されます。</p>

<pre><code class="language-bash">$ screen -r 1255.pts-0.raspberrypi
</code></pre>

<p>セッションが不要になったら、そのセッション内でexitまたはCtrl-Dします。Ctrl-A+Ctrl-Kでセッションを終了させることも可能です。Ctrl-A+?と入力するとヘルプが表示されます。</p>

<p>screen内でdump1090を動作させておけるようになったら、ブラウザで接続してみます。Raspberry PiのIPアドレスを調べて、他のPCからブラウザで http://{raspi ip address}:8080 を開くとgoogle mapが表示され、航空機の位置が表示されるはずです。</p>

<p><img src="https://78.media.tumblr.com/a4c10b3fb9daa688461e1ba0aac584d9/tumblr_inline_p8rw9c8HNz1r9hszk_540.png" alt="image" /></p>

<p>しばらくこの状態で、安定稼働するかどうかを試します。私の環境では時間後にOSがが反応しなくなるという現象が出ました。Raspberry PiはUSBの電源廻りが弱いという欠点があり、RTLドングルの電力消費に耐えられなかったようです。新しいRaspberry Piでは改善が図られているようですが、今回は旧版のRaspberry Piをそのまま使いたかったので、USBにセルフパワーハブを使用して、USBをRasPi本体から直接取らないようにすることで改善することができました。ついでにRaspberry Piの電源も同じセルフパワーハブから取るようにしました。RasPiが親になっているUSBハブのポートからRasPiの電源を取るのは変な感じですが、特に問題なく動作しています。電源制御されるハブの場合には問題があるかもしれません。</p>

<p>あとネットワークですが、安定接続のために有線のEthernetで接続しています。最初は無線で試したのですが、設置場所のせいで接続が安定せず、結局有線に変更しました。以後は危なげなく安定して動作しています。</p>

<p>さて、dump1090が稼働するようになったら、今度はflightradar24にフィードします。フィードするためのソフトウェアがwindows/linux/raspbery pi用のバイナリファイルが用意されていますので、ダウンロードして展開して内容を確認し、動作するかどうか試してみます。raspberry pi用は2種類ありますが、スタティックリンク版を使用するほうがトラブルが少ないと思います。</p>

<pre><code class="language-bash">$ wget https://dl.dropbox.com/u/66906/fr24feed_arm-le_242s.tgz
$ tar xfz fr24feed_arm-le_242s.tgz
$ ls
fr24feed_arm-le_242s fr24feed_arm-le_242s.tgz
$ file fr24feed_arm-le_242s
fr24feed_arm-le_242s: ELF 32-bit LSB executable, ARM, version 1 (SYSV), statically linked, for GNU/Linux 2.6.18, BuildID[sha1]=0x5983f9ffa0cdc6866076241d103c5b6cb6a29faa, not stripped
$ ./fr24feed_arm-le_242s
[i]FR24Feed v242 - built on Apr 23 2014/09:49:17
Regular usage:
./fr24feed_arm-le_242s --fr24key=YOUR_SHARING_KEY
./fr24feed_arm-le_242s --fr24key=YOUR_SHARING_KEY [ --bs-ip=xxx.xxx.xxx.xxx --bs-port=NNNNN
If you don't have a sharing key please use the following command:
./fr24feed_arm-le_242s --signup
</code></pre>

<p>うまく動いたら、さっそくサインアップを行います。以前はWindows版のソフトウェアが必要だったようですが、現在はRaspberry Piから直接サインアップすることができました。いくつか質問がされますので、適宜入力していきます。受信地点の概略の緯度、経度が必要ですが、小数点以下一桁くらいで良いようです。それとメールアドレス。あとdump1090が動作しているホストとポート番号ですが、同じホストで動作させるならEnterだけでOKです。以上入力すると内容チェックの後、dump1090と接続して受信テストが行われて、うまく動いていることが確認されたら、レーダー番号と共有鍵が発行されます。</p>

<pre><code class="language-bash">$ ./fr24feed_arm-le_242s --signup
[i]FR24Feed v242 - built on Apr 23 2014/09:49:17
Welcome to the FR24 Feeder sign up wizard!

Before you continue please make sure that:

1 - You have a working receiver/decoder providing Basestation compatible stream
2 - You know the network address of the data feed (localhost:30003 by default)
3 - You know your receivers location up to 1 decimal point
4 - You have a working email address that will be used to contact you

To terminate - press Ctrl+C at any point

Step 1/5 - Enter Latitude (DD.DDDD)
$:xx.xxx
Step 2/5 - Enter Longitude (DD.DDDD)
$:xxx.xxx
Step 3/5 - Enter your email address (username@domain.tld)
$:xxx@xxxx.xxx
Step 4/5 - Enter your the hostname of the data feed (leave empty for localhost)
$:
Step 5/5 - Enter your the port number of the data feed (leave empty for 30003)
$:

Validating form data...OK

The closest airport found is ICAO:RJCO IATA:OKD near Sapporo.

Latitude: 
Longitude: 
Country: Japan

Flightradar24 may, if needed, use your email address to contact you regarding your data feed.

Would you like to continue using these settings?

(yes/no)$:yes

Taking data sample, minimum 3 AC required including at least 2 ADS-B:

[b]connecting to localhost:30003
[b]connected
[i]00:00 - Connected to the data feed
[b]working
[i]Data feed time difference OK abs(13:15:21.875 - 13:15:21.853)=0
[b]00:05 - 5 AC in range
[b]00:10 - 5 AC in range
[b]00:15 - 5 AC in range
[b]00:20 - 5 AC in range
[b]00:25 - 6 AC in range
[b]00:30 - 6 AC in range
[b]00:35 - 6 AC in range
[i]Removed 0 of 6 AC
[b]disconnected

Sending data sample to the server, completing registration...OK

Account registered successfully!
Your sharing key is: xxxxxxxxxxxxxxx
Your radar code is: T-RJCO6

Soon you should also receive an email containing this information.

To start sending data please start the feeder providing your key:
./fr24feed_arm-le_242s --fr24key=xxxxxxxxxxxxxxx
</code></pre>

<p>レーダー番号は、入力された緯度経度から得た最寄りの空港コードに、番号を付けたものが発行されます。ちょっとそれっぽい気分になるギミックです。</p>

<p>フィーダを動作させるときには発行された共有鍵を使用します。フィーダも常時稼働させますので、新たにscreenセッションを開始してこの中でフィーダを動作させます。</p>

<pre><code class="language-bash">$ screen
$ ./fr24feed_arm-le_242s --fr24key=xxxxxxxxxxxxxxx
[i]FR24Feed v242 - built on Apr 23 2014/09:49:17
[i]Downloading configuration...OK
[i]Parsing configuration...OK
[c]Interval: 5s
...
</code></pre>

<p>エラー無しにフィードがうまく動いているようなら、Ctrl-A+Ctrl-Dでデタッチしてしまってかまいません。</p>

<p>注意点ですが、dump1090とfr24_feedの常時稼働にscreenを使っていますが、自動でプロセスを起動することはできません。マシンを再起動する度に、screenでセッション作成とプロセス起動を行う必要があります。起動スクリプトでデーモンにしてしまうとログの記録と管理が面倒なので、しばらくはscreenで運用する予定です。</p>

<p>Flightradar24のWebにアクセスして、フィードのサインアップに使用したメールアドレスで、アカウントを作っておきます。アカウントの作成はフィードのサインアップとは別に行う必要があります。同じメールアドレスを使う必要があります。</p>

<p>Flightradar24にログインすると、自分のフィードの情報を確認することができます。数時間動作させた後であれば、受信した航空機やメッセージ数、距離や方向などの統計情報を確認することができます。これで受信状況の確認ができるようです。</p>

<p><img src="https://78.media.tumblr.com/457e0da5bd2ef067083fe50c58ba9c65/tumblr_inline_p8rw9dImMv1r9hszk_540.png" alt="image" /></p>

<p>Flightradarの画面に自分がフィードした情報が出るとちょっと嬉しいです。レーダー番号で識別することができます。</p>

<p><img src="https://78.media.tumblr.com/686d530f69c1ce2f5889a9dc67517198/tumblr_inline_p8rw9dkztx1r9hszk_540.png" alt="image" /></p>

<p>dump1090の画面と並べるとこんな感じです。</p>

<p><img src="https://78.media.tumblr.com/9f30742836fd1eebe99df902d2cb0fb9/tumblr_inline_p8rw9dmGqc1r9hszk_540.png" alt="image" /></p>

<p>気になるRaspberry Piの負荷ですが、dump1090が30~40%消費するようですが、まだ余裕があります。メモリの消費も少なく、256MBのモデルでも全く問題なく動作しています。</p>

<p><img src="https://78.media.tumblr.com/05cf71b195ddf11aaa575fb3d7a485b2/tumblr_inline_p8rw9eGwiC1r9hszk_540.png" alt="image" /></p>

<p>Flightradar24ですが、フィードが動作しているならプレミアムサービスが無料で利用可能です。表示時間の制限が無くなり、その他全画面表示や、レーダービューなどを見ることができます。iPhone用のソフトウェアもプレミアム版も利用可能です。</p>

<p><img src="https://78.media.tumblr.com/1c9e5df71b8ef0b0a7401d8ca3cac5ab/tumblr_inline_p8rw9eEWG21r9hszk_540.png" alt="image" /></p>

<p>ここ数日運用を続けていますが、調子良く動作しています。方位や距離のチャートも出るので、設定を変えて比較することもできると思います。もう少しいろいろ試してみようと思います。</p>

<p>リファレンス</p>

<ul>
<li>Flightradar24 <a href="http://www.flightradar24.com/" target="_blank">http://www.flightradar24.com/</a></li>
<li>フィード用のソフトウェアはこちらから <a href="http://forum.flightradar24.com/threads/4270-Linux-feeder-software-for-Flightradar24" target="_blank">http://forum.flightradar24.com/threads/4270-Linux-feeder-software-for-Flightradar24</a> </li>
<li>Okiraku Programming:Raspberry Piで航空機からの位置情報信号ADS-Bを受信 <a href="http://d.hatena.ne.jp/NeoCat/20140402/1396406442" target="_blank">http://d.hatena.ne.jp/NeoCat/20140402/1396406442</a></li>
<li>Today&rsquo;s Sky ja8175さんのブログ：Linux Feeder software for Flightradar24 <a href="http://blog.ja8175.com/archives/546" target="_blank">http://blog.ja8175.com/archives/546</a></li>
</ul>
        </div>
        

<footer class="post-footer">
  <p class="meta">
    <span class="byline author vcard">Posted by <span class="fn">TT</span></span>
    
    at <time>Aug 22, 2014</time>
	<a href="https://ttrftech.github.io/posts/2014-08-22-receiving-ads-b-using-raspberry-pi-and-feed-flightradar2/" class="permalink">Permalink ∞</a>
    
      <span class="categories">
        Tags:
        
          <a class="category" href="https://ttrftech.github.io/tags/raspberry-pi">raspberry pi</a>  <a class="category" href="https://ttrftech.github.io/tags/ads-b">ads-b</a>  <a class="category" href="https://ttrftech.github.io/tags/rtlsdr">rtlsdr</a>  <a class="category" href="https://ttrftech.github.io/tags/flightradar24">flightradar24</a>  
    
    </span>
  </p>

<iframe src="https://www.facebook.com/plugins/like.php?href=https%3a%2f%2fttrftech.github.io%2fposts%2f2014-08-22-receiving-ads-b-using-raspberry-pi-and-feed-flightradar2%2f&amp;send=false&amp;layout=button_count&amp;width=75&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=20&amp;locale=en_US" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:75px; height:20px;"></iframe>
<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://ttrftech.github.io/posts/2014-08-22-receiving-ads-b-using-raspberry-pi-and-feed-flightradar2/" data-text="Raspberry-PiでADS-Bを受信しFlightradar24にフィードする" data-via="edy555">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<a href="https://b.hatena.ne.jp/entry/https://ttrftech.github.io/posts/2014-08-22-receiving-ads-b-using-raspberry-pi-and-feed-flightradar2/" class="hatena-bookmark-button" data-hatena-bookmark-title="Computer RF Tech" data-hatena-bookmark-layout="simple-balloon" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>

</footer>

		
		
		<div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
      
      
      
      if (window.location.hostname == "localhost")
          return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'ttrftech';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

		
		
      </article>
    </div>
  </div>
</div>

	</div>
        <div id="footer">
      <p>Copyright &copy; 2019 TT - <a href="https://ttrftech.github.io/license/">License</a> -
        <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a>.
      </p>
    </div>

    
      <script>
        var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
      </script>
    
  </body>
</html>

  </body>
</html>
